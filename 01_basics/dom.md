## DOM
React 특징 중에서 Virtual DOM이나 직접 DOM 조작을 안 한다라는 말이 나오는데, 여기서 DOM이 뭔지 모르면 헷갈릴 수 있다.
<br/>

### DOM이란?
DOM(Document Object Model)
  = "브라우저가 HTML문서를 해석해서 만든 트리 구조 객체"

쉽게 말해서 웹페이지를 js로 조작할 수 있도록 바꿔놓은 모델

---

### 1. DOM이 왜 필요한가?
"우리가 웹사이트를 만든다고 생각할때, HTML 파일 안에 아래와 같은 코드가 있으면
```
<h1>Hello</h1>
<button>Click Me</button>
```

이 상태로는 그저 텍스트일 뿐 <br/>
그런데 브라우저는 이걸 읽고 ‘트리 구조의 객체’로 바꿔두는데, 이게 바로 DOM

---

### 2. DOM을 어떻게 쓸까?
브라우저가 DOM을 만들어놨기 때문에, js에서 이걸 자유롭게 다룰 수 있다.<br/>
예를 들어 `Hello`라는 글자를 `Hi!`로 바꾸고 싶으면
```
document.querySelector("h1").textContent = "Hi!";
```
이 코드 한 줄로, 화면의 글자가 바로 바뀜.<br/>
즉, DOM 덕분에 정적인 HTML을 동적으로 조작할 수 있는 것

---

### 3. 근데 DOM에는 문제가 있다
DOM을 조작하면 화면이 바뀌는 건 좋은데, 문제는 성능<br/>
화면에 요소가 수십 개, 수백 개 있으면, 뭔가 하나만 바꿔도 브라우저는 전체 레이아웃을 다시 계산하고, 화면을 다시 그려야 할 때가 있다.<br/>
이게 누적되면 웹이 느려지는 원인이 됨

---

### 4. 그래서 React가 Virtual DOM을 쓴다
**React는 이런 성능 문제를 해결하려고 Virtual DOM이라는 개념을 도입**
진짜 DOM을 직접 다루는 대신, 메모리에 가짜 DOM을 하나 만들어두고, 상태가 변하면 그 가짜 DOM만 먼저 업데이트하는 것
react는 항상 2개의 가상돔을 갖고 있다. <br/> 1. 변경 이전의 내용을 담은 가상돔    2. 변경 이후에 보여질 내용을 담고 있는 가상돔 <br/>

그다음에 '뭐가 바뀌었는지'를 비교(diffing)한 뒤, 꼭 필요한 부분만 진짜 DOM에 반영

바뀐 element들을 파악한 다음에 React는 딱 바뀐 부분만 실제 DOM에 적용시켜줌  = Reconciliation: 재조정 <br/>
react에 재조정과정이 굉장히 효율적인 이유는 **"Batch Update"** 덕분 <br/>
*Batch: 집단 -> 변경된 모든 elements들을 집단으로 실제 돔에 **한꺼번에(한번에)** 적용 <br/>
*DOM 조작에 있어서 가장 비용이 많이 드는 작업은 화면을 그려주는 작업<br/>

---

### 5. 쉽게 비유하면
DOM은 진짜 벽에다 그림 그리는 거고, <br/> Virtual DOM은 스케치북에 먼저 그려보고 수정한 뒤 완성된 부분만 벽에 옮겨 그리는것<br/>
벽에다 직접 자꾸 덧칠하면 힘들지만, 스케치북에서 먼저 연습하면 훨씬 효율적인 것처럼, React가 그 역할을 대신 해주는 것

<br/>

### ✨정리
**DOM**: 웹페이지 구조를 트리 형태로 표현한 모델 (자바스크립트로 직접 조작 가능) <br/>
**Virtual DOM**: React가 성능 최적화를 위해 쓰는 “가짜 DOM” (실제 DOM에 필요한 부분만 반영).

